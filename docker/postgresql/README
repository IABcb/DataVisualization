#################################################
# For new computers in Ericsson network, must edit this file:

/lib/systemd/system/docker.service


# AND Comment this line:
ExecStart=/usr/bin/dockerd -H fd://

# AND Uncomment or add this other one:
ExecStart=/usr/bin/dockerd --dns 159.107.39.10 -H fd://

# In Docker File, uncomment:
# ENV http_proxy="http://www-proxy.ericsson.se:8080" \
#	https_proxy="http://www-proxy.ericsson.se:8080" \
#	no_proxy="127.0.0.1,localhost,10.65.104.131"

# Make
systemctl daemon-reload

# Make
sudo service docker restart
##################################################
#Normal process

# build the POSTGRES container, with user, password, and roles already set
sudo docker build -t compa/postgres:DEMO .

# execute that container, with two publish. This turn on a sql server
sudo docker run --name postgresql -itd --restart always --publish 80:80 --publish 5432:5432 --volume /srv/docker/postgresql:/var/lib/postgresql compa/postgres:DEMO

# Try to connect to de DB with localhost in browser:
# The PHPpgAdmin GUI is avaliable at the URL
http://<ip>:<port>/phppgadmin
#For example, when running as above in your machine:
http://localhost/phppgadmin

# If not, download

sudo apt-get install pgadmin3

# Add a new server, with port 5432 and you will be connected to the  DB

# connect to the DB
psql -U postgres -h 'dip postgresql' -d compa

